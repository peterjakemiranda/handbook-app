"use strict";(self["webpackChunkhandbook_app"]=self["webpackChunkhandbook_app"]||[]).push([[548],{6952:(a,t,e)=>{e.d(t,{Z:()=>h});var o=e(5474);const s=(a,t)=>{t(a)},l=(a,t)=>{t(a)},n=(a,t)=>new Promise(((e,n)=>{o.axios.post(`/api/bookmarks/${a}`,{bookmark:t}).then((a=>{s(a.data,e)})).catch((a=>{l(a.response.data,n)}))}));var i=e(8938);const r=({data:a},t)=>{i["default"].dispatch("fetchAllBookmarks",a),t(a)},c=(a,t)=>t(a),d=()=>new Promise(((a,t)=>{o.axios.get("/api/bookmarks").then((t=>{r(t,a)})).catch((a=>{c(a,t)}))})),p=(a,t)=>{d(),t(a)},u=(a,t)=>{t(a)},m=a=>new Promise(((t,e)=>{o.axios["delete"](`/api/bookmarks/${a}`).then((a=>{p(a.data,t)})).catch((a=>{u(a.response.data,e)}))})),h={all:d,bookmark:n,destroy:m}},2577:(a,t,e)=>{e.d(t,{Z:()=>W});var o=e(5474);const s=(a,{data:t})=>{a(t)},l=(a,t)=>{t(a)},n=a=>new Promise(((t,e)=>{o.axios.request({url:"/api/chapters",data:a,method:"post"}).then((a=>{s(t,a)})).catch((a=>{l(a.response.data,e)}))})),i=(a,t)=>{t(a)},r=(a,t)=>{t(a)},c=(a,t)=>new Promise(((e,s)=>{o.axios.request({url:`/api/chapters/${a}`,data:t,method:"put"}).then((a=>{i(a.data,e)})).catch((a=>{r(a.response.data,s)}))}));var d=e(8938),p=e(5314),u=e(3305);const m=({data:a},t,e)=>{const o=a,s=p.Z.fetch(a.pagination);d["default"].dispatch("fetchChapters",{chapters:o,pagination:s}),e({chapters:o,pagination:s})},h=(a,t)=>t(a),k=(a={})=>new Promise(((t,e)=>{o.axios.get(u.Z.buildUrl("/api/chapters",a)).then((e=>{m(e,a,t)})).catch((a=>{h(a,e)}))})),b=({data:a},t)=>{d["default"].dispatch("fetchAllChapters",a),t(a)},w=(a,t)=>t(a),g=(a=null)=>new Promise(((t,e)=>{o.axios.get(null===a?"/api/chapters":`/api/chapters?search=${a}`).then((a=>{b(a,t)})).catch((a=>{w(a,e)}))})),f=(a,t)=>{t(a)},_=(a,t)=>{t(a)},y=a=>new Promise(((t,e)=>{o.axios.get(`/api/chapters/${a}`).then((a=>{f(a.data,t)})).catch((a=>{_(a.response.data,e)}))})),x=(a,t)=>{g(),t(a)},q=(a,t)=>{t(a)},Z=a=>new Promise(((t,e)=>{o.axios["delete"](`/api/chapters/${a}`).then((a=>{x(a.data,t)})).catch((a=>{q(a.response.data,e)}))})),W={store:n,update:c,items:k,all:g,show:y,destroy:Z}},5314:(a,t,e)=>{e.d(t,{Z:()=>s});class o{static fetchCollection(a){return a.map((a=>this.fetch(a)))}static sendCollection(a){return a.map((a=>this.send(a)))}}class s extends o{static fetch(a){return{currentPage:a.current_page,lastPage:a.last_page,limit:a.limit,totalCount:a.total_count,counters:a.counters}}static send(a){return{current_page:a.currentPage,last_page:a.lastPage,limit:a.limit,total_count:a.totalCount}}}},3305:(a,t,e)=>{e.d(t,{Z:()=>o});const o={buildUrl(a,t){let e="?";const o=Object.keys(t).filter((a=>t[a]));return o.forEach(((a,s)=>{e+=`${a}=${t[a]}`,s<o.length-1&&(e+="&")})),`${a}${e}`},debounce(a,t){var e=null;return function(){clearTimeout(e);var o=arguments,s=this;e=setTimeout((function(){a.apply(s,o)}),t)}}}},548:(a,t,e)=>{e.r(t),e.d(t,{default:()=>L});e(246);var o=e(3673),s=e(2323),l=e(8880);const n={key:0,class:"text-center q-pt-xl"},i={key:1},r={key:0,class:"text-center q-pt-xl"},c={key:1};function d(a,t,e,d,p,u){const m=(0,o.up)("q-tab"),h=(0,o.up)("q-tabs"),k=(0,o.up)("q-page-sticky"),b=(0,o.up)("q-separator"),w=(0,o.up)("q-spinner-bars"),g=(0,o.up)("q-item-label"),f=(0,o.up)("q-item-section"),_=(0,o.up)("q-icon"),y=(0,o.up)("q-item"),x=(0,o.up)("q-list"),q=(0,o.up)("q-tab-panel"),Z=(0,o.up)("q-btn"),W=(0,o.up)("q-tab-panels");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(k,{expand:"",position:"top",style:{"z-index":"1"}},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:a.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>a.tab=t),"narrow-indicator":"","active-color":"blue-8",class:"bg-grey-1 full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{name:"myhandbook",label:"My Handbook",icon:"menu_book"}),(0,o.Wm)(m,{name:"bookmarks",label:"My Bookmarks",icon:"star"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(b),(0,o.Wm)(W,{modelValue:a.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>a.tab=t),animated:"","virtual-scroll":"",style:{"padding-top":"68px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{name:"myhandbook",class:"q-pa-xs"},{default:(0,o.w5)((()=>[a.handbookLoading?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(w,{color:"primary",size:"2em"})])):((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(x,{class:"q-pa-sm",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.chapters,(t=>((0,o.wg)(),(0,o.j4)(y,{to:`/article/${t.id}`,key:t.id},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"text-weight-bold text-subtitle1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.title),1)])),_:2},1024),(0,o.Wm)(g,{caption:"",lines:"2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(a.titleCase(t.description)),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(f,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"local_library"})])),_:1})])),_:2},1032,["to"])))),128))])),_:1})]))])),_:1}),(0,o.Wm)(q,{name:"bookmarks",class:"q-pa-xs"},{default:(0,o.w5)((()=>[a.bookmarkLoading?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(w,{color:"primary",size:"2em"})])):((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(x,{class:"q-pa-sm",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.bookmarks,(t=>((0,o.wg)(),(0,o.j4)(y,{clickable:"",onClick:(0,l.iM)((e=>a.viewArticle(t)),["prevent"]),key:t.id},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"text-subtitle1"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"star",color:"yellow-9",class:"q-pa-xs"}),(0,o._)("span",null,(0,s.zw)(a.titleCase(t.title)),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(f,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{flat:"",icon:"delete",clickable:"",onClick:(0,l.iM)((e=>a.deleteBookmark(t.id)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})]))])),_:1})])),_:1},8,["modelValue"])])}var p=e(7874),u=e(2577),m=e(6952);e(2130);const h=(0,o.aZ)({name:"PageIndex",data(){return{tab:"myhandbook",handbookLoading:!1,bookmarkLoading:!1}},computed:{...(0,p.Se)({chapters:"allChapters",bookmarks:"allBookmarks"})},mounted(){this.handbookLoading=!0,u.Z.all().then((a=>{this.handbookLoading=!1})).catch((a=>{this.handbookLoading=!1}))},methods:{titleCase(a){return a.split(" ").map((function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})).join(" ")},viewArticle(a){console.log(a),this.$router.push(`/article/${a.chapter_id}#section-${a.section_id}`)},deleteBookmark(a){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this bookmark?",cancel:!0,persistent:!0}).onOk((()=>{m.Z.destroy(a).then((a=>{this.loading=!1})).catch((a=>{this.loading=!1}))}))}},watch:{tab(a){"bookmarks"===a&&(this.bookmarkLoading=!0,m.Z.all().then((a=>{this.bookmarkLoading=!1})).catch((a=>{this.bookmarkLoading=!1})))}}});var k=e(1007),b=e(7547),w=e(3269),g=e(5869),f=e(5906),_=e(6602),y=e(4752),x=e(7011),q=e(3414),Z=e(2035),W=e(2350),v=e(4554),C=e(2165),P=e(7518),$=e.n(P);h.render=d;const L=h;$()(h,"components",{QPageSticky:k.Z,QTabs:b.Z,QTab:w.Z,QSeparator:g.Z,QTabPanels:f.Z,QTabPanel:_.Z,QSpinnerBars:y.Z,QList:x.Z,QItem:q.Z,QItemSection:Z.Z,QItemLabel:W.Z,QIcon:v.Z,QBtn:C.Z})}}]);