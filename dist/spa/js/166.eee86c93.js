"use strict";(self["webpackChunkhandbook_app"]=self["webpackChunkhandbook_app"]||[]).push([[166],{6952:(t,a,e)=>{e.d(a,{Z:()=>h});var o=e(5474);const s=(t,a)=>{a(t)},l=(t,a)=>{a(t)},n=(t,a)=>new Promise(((e,n)=>{o.axios.post(`/api/bookmarks/${t}`,{bookmark:a}).then((t=>{s(t.data,e)})).catch((t=>{l(t.response.data,n)}))}));var i=e(8938);const r=({data:t},a)=>{i["default"].dispatch("fetchAllBookmarks",t),a(t)},c=(t,a)=>a(t),d=()=>new Promise(((t,a)=>{o.axios.get("/api/bookmarks").then((a=>{r(a,t)})).catch((t=>{c(t,a)}))})),u=(t,a)=>{d(),a(t)},p=(t,a)=>{a(t)},m=t=>new Promise(((a,e)=>{o.axios["delete"](`/api/bookmarks/${t}`).then((t=>{u(t.data,a)})).catch((t=>{p(t.response.data,e)}))})),h={all:d,bookmark:n,destroy:m}},2577:(t,a,e)=>{e.d(a,{Z:()=>W});var o=e(5474);const s=(t,{data:a})=>{t(a)},l=(t,a)=>{a(t)},n=t=>new Promise(((a,e)=>{o.axios.request({url:"/api/chapters",data:t,method:"post"}).then((t=>{s(a,t)})).catch((t=>{l(t.response.data,e)}))})),i=(t,a)=>{a(t)},r=(t,a)=>{a(t)},c=(t,a)=>new Promise(((e,s)=>{o.axios.request({url:`/api/chapters/${t}`,data:a,method:"put"}).then((t=>{i(t.data,e)})).catch((t=>{r(t.response.data,s)}))}));var d=e(8938),u=e(5314),p=e(3305);const m=({data:t},a,e)=>{const o=t,s=u.Z.fetch(t.pagination);d["default"].dispatch("fetchChapters",{chapters:o,pagination:s}),e({chapters:o,pagination:s})},h=(t,a)=>a(t),k=(t={})=>new Promise(((a,e)=>{o.axios.get(p.Z.buildUrl("/api/chapters",t)).then((e=>{m(e,t,a)})).catch((t=>{h(t,e)}))})),b=({data:t},a)=>{d["default"].dispatch("fetchAllChapters",t),a(t)},w=(t,a)=>a(t),g=(t=null)=>new Promise(((a,e)=>{o.axios.get(null===t?"/api/chapters":`/api/chapters?search=${t}`).then((t=>{b(t,a)})).catch((t=>{w(t,e)}))})),f=(t,a)=>{a(t)},_=(t,a)=>{a(t)},Z=t=>new Promise(((a,e)=>{o.axios.get(`/api/chapters/${t}`).then((t=>{f(t.data,a)})).catch((t=>{_(t.response.data,e)}))})),q=(t,a)=>{g(),a(t)},x=(t,a)=>{a(t)},y=t=>new Promise(((a,e)=>{o.axios["delete"](`/api/chapters/${t}`).then((t=>{q(t.data,a)})).catch((t=>{x(t.response.data,e)}))})),W={store:n,update:c,items:k,all:g,show:Z,destroy:y}},5314:(t,a,e)=>{e.d(a,{Z:()=>s});class o{static fetchCollection(t){return t.map((t=>this.fetch(t)))}static sendCollection(t){return t.map((t=>this.send(t)))}}class s extends o{static fetch(t){return{currentPage:t.current_page,lastPage:t.last_page,limit:t.limit,totalCount:t.total_count,counters:t.counters}}static send(t){return{current_page:t.currentPage,last_page:t.lastPage,limit:t.limit,total_count:t.totalCount}}}},3305:(t,a,e)=>{e.d(a,{Z:()=>o});const o={buildUrl(t,a){let e="?";const o=Object.keys(a).filter((t=>a[t]));return o.forEach(((t,s)=>{e+=`${t}=${a[t]}`,s<o.length-1&&(e+="&")})),`${t}${e}`},debounce(t,a){var e=null;return function(){clearTimeout(e);var o=arguments,s=this;e=setTimeout((function(){t.apply(s,o)}),a)}}}},6166:(t,a,e)=>{e.r(a),e.d(a,{default:()=>W});e(246);var o=e(3673),s=e(2323),l=e(8880);function n(t,a,e,n,i,r){const c=(0,o.up)("q-tab"),d=(0,o.up)("q-tabs"),u=(0,o.up)("q-page-sticky"),p=(0,o.up)("q-separator"),m=(0,o.up)("q-item-label"),h=(0,o.up)("q-item-section"),k=(0,o.up)("q-icon"),b=(0,o.up)("q-item"),w=(0,o.up)("q-list"),g=(0,o.up)("q-tab-panel"),f=(0,o.up)("q-btn"),_=(0,o.up)("q-tab-panels");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,{expand:"",position:"top",style:{"z-index":"1"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>t.tab=a),"narrow-indicator":"","active-color":"blue-8",class:"bg-grey-1 full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"myhandbook",label:"My Handbook",icon:"menu_book"}),(0,o.Wm)(c,{name:"bookmarks",label:"My Bookmarks",icon:"star"})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(p),(0,o.Wm)(_,{modelValue:t.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>t.tab=a),animated:"","virtual-scroll":"",style:{"padding-top":"68px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"myhandbook",class:"q-pa-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(w,{class:"q-pa-sm",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.chapters,(a=>((0,o.wg)(),(0,o.j4)(b,{to:`/article/${a.id}`,key:a.id},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"text-weight-bold text-subtitle1"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(a.title),1)])),_:2},1024),(0,o.Wm)(m,{caption:"",lines:"2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.titleCase(a.description)),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(h,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{name:"local_library"})])),_:1})])),_:2},1032,["to"])))),128))])),_:1})])])),_:1}),(0,o.Wm)(g,{name:"bookmarks",class:"q-pa-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(w,{class:"q-pa-sm",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.bookmarks,(a=>((0,o.wg)(),(0,o.j4)(b,{clickable:"",onClick:(0,l.iM)((e=>t.viewArticle(a)),["prevent"]),key:a.id},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"text-subtitle1"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{name:"star",color:"yellow-9",class:"q-pa-xs"}),(0,o._)("span",null,(0,s.zw)(t.titleCase(a.title)),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(h,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{flat:"",icon:"delete",clickable:"",onClick:(0,l.iM)((e=>t.deleteBookmark(a.id)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])])),_:1})])),_:1},8,["modelValue"])])}var i=e(7874),r=e(2577),c=e(6952);e(2130);const d=(0,o.aZ)({name:"PageIndex",data(){return{tab:"myhandbook",handbookLoading:!1,bookmarkLoading:!1}},computed:{...(0,i.Se)({chapters:"allChapters",bookmarks:"allBookmarks"})},mounted(){r.Z.all().then((t=>{this.loading=!1})).catch((t=>{this.loading=!1}))},methods:{titleCase(t){return t.split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})).join(" ")},viewArticle(t){console.log(t),this.$router.push(`/article/${t.chapter_id}#section-${t.section_id}`)},deleteBookmark(t){this.$q.dialog({title:"Confirm",message:"Are you sure to delete this bookmark?",cancel:!0,persistent:!0}).onOk((()=>{c.Z.destroy(t).then((t=>{this.loading=!1})).catch((t=>{this.loading=!1}))}))}},watch:{tab(t){"bookmarks"===t&&c.Z.all().then((t=>{this.loading=!1})).catch((t=>{this.loading=!1}))}}});var u=e(1007),p=e(7547),m=e(3269),h=e(5869),k=e(5906),b=e(6602),w=e(7011),g=e(3414),f=e(2035),_=e(2350),Z=e(4554),q=e(2165),x=e(7518),y=e.n(x);d.render=n;const W=d;y()(d,"components",{QPageSticky:u.Z,QTabs:p.Z,QTab:m.Z,QSeparator:h.Z,QTabPanels:k.Z,QTabPanel:b.Z,QList:w.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:_.Z,QIcon:Z.Z,QBtn:q.Z})}}]);