"use strict";(self["webpackChunkhandbook_app"]=self["webpackChunkhandbook_app"]||[]).push([[277],{3649:(t,e,a)=>{a.d(e,{Z:()=>y});var s=a(5474);const i=(t,{data:e})=>{t(e)},n=(t,e)=>{e(t)},o=t=>new Promise(((e,a)=>{s.axios.request({url:"/chapters",data:t,method:"post"}).then((t=>{i(e,t)})).catch((t=>{n(t.response.data,a)}))})),r=(t,e)=>{e(t)},h=(t,e)=>{e(t)},c=(t,e)=>new Promise(((a,i)=>{s.axios.request({url:`/chapters/${t}`,data:e,method:"put"}).then((t=>{r(t.data,a)})).catch((t=>{h(t.response.data,i)}))}));var l=a(8427),d=a(5314),p=a(3305);const u=({data:t},e,a)=>{const s=t,i=d.Z.fetch(t.pagination);l["default"].dispatch("fetchChapters",{chapters:s,pagination:i}),a({chapters:s,pagination:i})},m=(t,e)=>e(t),g=(t={})=>new Promise(((e,a)=>{s.axios.get(p.Z.buildUrl("/chapters",t)).then((a=>{u(a,t,e)})).catch((t=>{m(t,a)}))})),w=({data:t},e)=>{l["default"].dispatch("fetchAllChapters",t),e(t)},f=(t,e)=>e(t),b=(t=null)=>new Promise(((e,a)=>{s.axios.get(null===t?"/chapters":`/chapters?search=${t}`).then((t=>{w(t,e)})).catch((t=>{f(t,a)}))})),$=(t,e)=>{e(t)},q=(t,e)=>{e(t)},v=t=>new Promise(((e,a)=>{s.axios.get(`/chapters/${t}`).then((t=>{$(t.data,e)})).catch((t=>{q(t.response.data,a)}))})),x=(t,e)=>{b(),e(t)},Z=(t,e)=>{e(t)},C=t=>new Promise(((e,a)=>{s.axios["delete"](`/chapters/${t}`).then((t=>{x(t.data,e)})).catch((t=>{Z(t.response.data,a)}))})),P=(t,e)=>{e(t)},S=(t,e)=>{e(t)},_=t=>new Promise(((e,a)=>{s.axios.post(`/chapters/${t}/answer`).then((t=>{P(t.data,e)})).catch((t=>{S(t.response.data,a)}))})),y={store:o,update:c,items:g,all:b,show:v,destroy:C,answer:_}},6523:(t,e,a)=>{a.d(e,{Z:()=>y});var s=a(5474);const i=(t,{data:e})=>{t(e)},n=(t,e)=>{e(t)},o=t=>new Promise(((e,a)=>{s.axios.request({url:"/sections",data:t,method:"post"}).then((t=>{i(e,t)})).catch((t=>{n(t.response.data,a)}))})),r=(t,e)=>{e(t)},h=(t,e)=>{e(t)},c=(t,e)=>new Promise(((a,i)=>{s.axios.request({url:`/sections/${t}`,data:e,method:"put"}).then((t=>{r(t.data,a)})).catch((t=>{h(t.response.data,i)}))}));var l=a(8427),d=a(5314),p=a(3305);const u=({data:t},e,a)=>{const s=t,i=d.Z.fetch(t.pagination);l["default"].dispatch("fetchSections",{sections:s,pagination:i}),a({sections:s,pagination:i})},m=(t,e)=>e(t),g=(t={})=>new Promise(((e,a)=>{s.axios.get(p.Z.buildUrl("/sections",t)).then((a=>{u(a,t,e)})).catch((t=>{m(t,a)}))})),w=({data:t},e)=>{l["default"].dispatch("fetchAllSections",t),e(t)},f=(t,e)=>e(t),b=(t=null)=>new Promise(((e,a)=>{s.axios.get(null===t?"/sections":`/sections?chapter_id=${t}`).then((t=>{w(t,e)})).catch((t=>{f(t,a)}))})),$=(t,e)=>{e(t)},q=(t,e)=>{e(t)},v=t=>new Promise(((e,a)=>{s.axios.get(`/sections/${t}`).then((t=>{$(t.data,e)})).catch((t=>{q(t.response.data,a)}))})),x=({data:t},e)=>{l["default"].dispatch("fetchSearchResults",t),e(t)},Z=(t,e)=>e(t),C=(t="")=>new Promise(((e,a)=>{s.axios.get(`/sections?search=${t}`).then((t=>{x(t,e)})).catch((t=>{Z(t,a)}))})),P=(t,e,a)=>{b(a),e(t)},S=(t,e)=>{e(t)},_=(t,e)=>new Promise(((a,i)=>{s.axios["delete"](`/sections/${t}`).then((t=>{P(t.data,a,e)})).catch((t=>{S(t.response.data,i)}))})),y={store:o,update:c,items:g,all:b,show:v,search:C,destroy:_}},9277:(t,e,a)=>{a.r(e),a.d(e,{default:()=>x});var s=a(3673),i=a(2323);const n={class:"q-pa-md"},o={class:"text-h5 q-py-md"},r={class:"q-gutter-lg q-pa-lg"};function h(t,e,a,h,c,l){const d=(0,s.up)("q-select"),p=(0,s.up)("q-input"),u=(0,s.up)("q-editor"),m=(0,s.up)("q-btn"),g=(0,s.up)("q-form");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",o,(0,i.zw)(t.id?"Update":"Create")+" Section",1),(0,s.Wm)(g,{onSubmit:t.onSubmit,onReset:t.onReset,class:"q-gutter-md",style:{"max-width":"800px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filled:"","map-options":"",modelValue:t.chapter,"onUpdate:modelValue":e[0]||(e[0]=e=>t.chapter=e),options:t.chapterOptions,label:"Chapter"},null,8,["modelValue","options"]),(0,s.Wm)(p,{filled:"",modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=e=>t.title=e),label:"Title"},null,8,["modelValue"]),(0,s.Wm)(u,{toolbar:[["left","center","right","justify","bold","italic","underline","hr","link","quote","unordered","ordered","outdent","indent"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]}],["undo","redo"],["viewsource"]],modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=e=>t.content=e),filled:"",label:"Content *","lazy-rules":"",rules:[t=>t&&t.length>0||"Content is required"]},null,8,["toolbar","modelValue","rules"]),(0,s._)("div",r,[(0,s.Wm)(m,{label:"Submit",type:"submit",color:"primary"}),(0,s.Wm)(m,{label:"Back",type:"submit",to:`/admin/chapters/${t.$route.params.chapter_id}/sections`},null,8,["to"])])])),_:1},8,["onSubmit","onReset"])])}var c=a(515),l=a.n(c),d=a(3649),p=a(6523),u=a(7874);const m=(0,s.aZ)({name:"AdminSectionForm",data(){return{id:"",title:"",content:"",chapter:""}},computed:l()(l()({},(0,u.Se)({chapters:"allChapters",sections:"allSections"})),{},{chapterOptions(){return this.chapters.map((t=>({label:t.title,value:t.id})))}}),mounted(){this.chapters.length?this.setCurrentChapter():d.Z.all().then((t=>{this.loading=!1,this.setCurrentChapter()})).catch((t=>{this.loading=!1})),this.$route.params.id&&p.Z.show(this.$route.params.id).then((t=>{this.id=t.id,this.title=t.title,this.content=t.content,this.loading=!1})).catch((t=>{this.loading=!1}))},methods:{onSubmit(){this.id?this.update():this.save()},save(){p.Z.store({title:this.title,content:this.content,chapter_id:this.chapter.value}).then((t=>{this.loading=!1,this.$router.push(`/admin/chapters/${this.$route.params.chapter_id}/sections`)})).catch((t=>{this.loading=!1}))},update(){p.Z.update(this.id,{title:this.title,content:this.content,chapter_id:this.chapter.value}).then((t=>{this.loading=!1,this.$router.push(`/admin/chapters/${this.$route.params.chapter_id}/sections`)})).catch((t=>{this.loading=!1}))},setCurrentChapter(){this.chapter=this.chapterOptions.find((t=>+t.value===+this.$route.params.chapter_id))},onReset(){}},watch:{chapters(t){}}});var g=a(5269),w=a(7236),f=a(4842),b=a(9991),$=a(2165),q=a(7518),v=a.n(q);m.render=h;const x=m;v()(m,"components",{QForm:g.Z,QSelect:w.Z,QInput:f.Z,QEditor:b.Z,QBtn:$.Z})}}]);